<!doctype html>
<html lang="en">

<head>


	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-168203025-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-168203025-1');
	</script>

  <meta charset="utf-8">
  <link href="https://fonts.googleapis.com/css?family=Space+Mono&display=swap" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Maggie Liu Portfolio</title>
	<link rel="stylesheet" href="css/globals.css" />
    <link rel="stylesheet" href="css/styleguide.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/grid.css" />
    <link href="https://fonts.googleapis.com/css?family=Space+Mono&display=swap" rel="stylesheet">

<style>

body {
  font-family: "Space Mono", monospace;
}
</style>

</head>

<body>

	 <main class="d-landing">
      <div class="div">
        <a href="/" class="m-logo">
          <img src="/img/about/m_logo_green.svg" alt="Site Logo">
        </a>
       
        <div class="grid-row">
          
          <section class="portfolio-section grid-col-4of12">
            <div class="frame-2">
              <a href="#JDE" class="frame-3" data-index="0">
                <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 8px;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2024</h2>
                    <h2 class="text-wrapper-4">JACOBS DOUWE EGBERTS</h2>
                  </div>
                  <span class="text-wrapper-5">[whitelabel design system]</span>
                </div>
              </a>
              <a href="#Marina" class="frame-3" data-index="1">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2024</h2>
                    <h2 class="text-wrapper-4">MARINA ABRAMOVIĆ</h2>
                  </div>
                  <span class="text-wrapper-5">[microsite]</span>
                </div>
              </a>
              <a href="#Dolomiti" class="frame-3" data-index="2">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2024</h2>
                    <h2 class="text-wrapper-4">DOLOMITI</h2>
                  </div>
                  <span class="text-wrapper-5">[visual experiments]</span>
                </div>
              </a>
              <a href="#Montblanc" class="frame-3" data-index="3">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2023</h2>
                    <h2 class="text-wrapper-4">MONTBLANC</h2>
                  </div>
                  <span class="text-wrapper-5">[digital paper]</span>
                </div>
              </a>
              <a href="#Toyota" class="frame-3" data-index="4">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2022</h2>
                    <h2 class="text-wrapper-4">TOYOTA</h2>
                  </div>
                  <span class="text-wrapper-5">[global navigation]</span>
                </div>
              </a>
              <a href="#Puma" class="frame-3" data-index="5">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2019</h2>
                    <h2 class="text-wrapper-4">PUMA: RUN MY WAY</h2>
                  </div>
                  <span class="text-wrapper-5">[interactive installation]</span>
                </div>
              </a>
              <a href="#Lufthansa" class="frame-3" data-index="6">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2019</h2>
                    <h2 class="text-wrapper-4">LUFTHANSA: #LIFECHANGINGPLACES</h2>
                  </div>
                  <span class="text-wrapper-5">[image recognition]</span>
                </div>
              </a>
              <a href="#Alice" class="frame-3" data-index="7">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                  <div class="gallery-caption">
                    <h2 class="text-wrapper-4">2019</h2>
                    <h2 class="text-wrapper-4">ALICE'S ADVENTURES IN WONDERLAND</h2>
                  </div>
                  <span class="text-wrapper-5">[print]</span>
                </div>
              </a>
            </div>
          </section>

          <section class="gallery-section grid-col-8of12">
              <div class="grid-row--column grid-col-1of12">
                <a href="#JDE" class="hover-swap" data-index="0">
                  <img src="img/index/jde_before.png" class="default-img" alt="JDE">
                  <img src="img/index/jde_after.gif" class="hover-img" alt="Alternate image">
                </a>  

                <a href="#Marina" class="hover-swap" data-index="1">
                  <img src="img/index/ma_before.png" class="default-img" alt="Marina Abramović">
                  <img src="img/index/ma_after.png" class="hover-img" alt="Alternate image">
                </a> 
              </div>

              <div class="grid-row--column grid-col-2of12">
                <a href="#Dolomiti" class="hover-swap" data-index="2">
                  <img src="img/index/dolomiti_before.png" class="default-img" alt="Dolomiti">
                  <img src="img/index/dolomiti_after.png" class="hover-img" alt="Alternate image">
                </a>  

                <a href="#Montblanc" class="hover-swap" data-index="3">
                  <img src="img/index/mb_before.png" class="default-img" alt="Montblanc">
                  <img src="img/index/mb_after.png" class="hover-img" alt="Alternate image">
                </a> 
              </div>

              <div class="grid-row--column grid-col-3of12">
                <a href="#Toyota" class="hover-swap" data-index="4">
                  <img src="img/index/toyota_before.png" class="default-img" alt="Toyota">
                  <img src="img/index/toyota_after.png" class="hover-img" alt="Alternate image">
                </a>  

                <a href="#Puma" class="hover-swap" data-index="5">
                  <img src="img/index/puma_before.png" class="default-img" alt="Puma">
                  <img src="img/index/puma_after.png" class="hover-img" alt="Alternate image">
                </a> 
              </div>

              <div class="grid-row--column grid-col-2of12">
                <a href="#Lufthansa" class="hover-swap" data-index="6">
                  <img src="img/index/lufthansa_before.png" class="default-img" alt="Lufthansa">
                  <img src="img/index/lufthansa_after.png" class="hover-img" alt="Alternate image">
                </a>  

                <a href="#Alice" class="hover-swap" data-index="7">
                  <img src="img/index/alice_before.png" class="default-img" alt="Alice">
                  <img src="img/index/alice_after.png" class="hover-img" alt="Alternate image">
                </a> 
              </div>
            </div>
          </section>
        </div>

        <nav class="contact-nav">
            <a href="#about">ABOUT</a>
            <a href="https://linkedin.com/in/maggieliujx" target="_blank" rel="noopener noreferrer">LINKEDIN</a>
            <a href="mailto:maggieliujx@gmail.com">MAGGIELIUJX@GMAIL.COM</a>
        </nav>
        
      </div>
    </main>

    
<script>
const allPortfolioItems = document.querySelectorAll('.frame-3[data-index]');
const allGalleryItems = document.querySelectorAll('.gallery-section [data-index]');
const allHoverSwap = document.querySelectorAll('.hover-swap');

function setHighlight(activeIndex) {
  allPortfolioItems.forEach(item => {
    const title = item.querySelector('.gallery-caption');
    const subtitle = item.querySelector('.text-wrapper-5');
    const isActive = item.getAttribute('data-index') === activeIndex;
    if (title) title.style.opacity = isActive ? '1' : '0.5';
    if (subtitle) subtitle.style.opacity = isActive ? '1' : '0.5';
    item.style.opacity = '1';
  });
  allGalleryItems.forEach(item => {
    item.style.opacity = item.getAttribute('data-index') === activeIndex ? '1' : '0.5';
  });
}

function resetHighlight() {
  allPortfolioItems.forEach(item => {
    const title = item.querySelector('.text-wrapper-4');
    const subtitle = item.querySelector('.text-wrapper-5');
    if (title) title.style.opacity = '1';
    if (subtitle) subtitle.style.opacity = '1';
    item.style.opacity = '1';
  });
  allGalleryItems.forEach(item => { item.style.opacity = '1'; });
}

// Gallery image swap for tablet
let gallerySwapInterval = null;
let currentActiveIndex = null;

function setActiveGalleryItem(index) {
  document.querySelectorAll('.gallery-section .hover-swap')
    .forEach(item => item.classList.remove('active'));
  const activeSwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
  if (activeSwap) activeSwap.classList.add('active');
}

function startGallerySwap(index) {
  stopGallerySwap();
  currentActiveIndex = index;
  const activeSwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
  if (!activeSwap) return;
  const defaultImg = activeSwap.querySelector('.default-img');
  const hoverImg = activeSwap.querySelector('.hover-img');
  let showHover = false;

  // start with default visible, hover hidden
  if (defaultImg) { defaultImg.style.display = 'block'; defaultImg.style.opacity = '1'; }
  if (hoverImg)  { hoverImg.style.display = 'none'; hoverImg.style.opacity = '0'; }

  gallerySwapInterval = setInterval(() => {
    showHover = !showHover;
    if (showHover) {
      if (hoverImg)  { hoverImg.style.display = 'block'; hoverImg.style.opacity = '1'; }
      if (defaultImg){ defaultImg.style.display = 'none'; defaultImg.style.opacity = '0'; }
    } else {
      if (hoverImg)  { hoverImg.style.display = 'none'; hoverImg.style.opacity = '0'; }
      if (defaultImg){ defaultImg.style.display = 'block'; defaultImg.style.opacity = '1'; }
    }
  }, 500);
}

function stopGallerySwap() {
  clearInterval(gallerySwapInterval);
  gallerySwapInterval = null;
  if (currentActiveIndex !== null) {
    const activeSwap = document.querySelector(`.gallery-section .hover-swap[data-index="${currentActiveIndex}"]`);
    if (activeSwap) {
      const defaultImg = activeSwap.querySelector('.default-img');
      const hoverImg = activeSwap.querySelector('.hover-img');
      if (defaultImg) { defaultImg.style.display = 'block'; defaultImg.style.opacity = '1'; }
      if (hoverImg)  { hoverImg.style.display = 'none'; hoverImg.style.opacity = '0'; }
    }
  }
  currentActiveIndex = null;
}

function tabletHighlightLogic() {
  if (window.innerWidth > 375 && window.innerWidth <= 768) {
    setActiveGalleryItem('0');
    setHighlight('0');
    startGallerySwap('0');

    // attach scroll handler only once
    if (!window._tabletScrollHandlerAttached) {
      window._tabletScrollHandlerAttached = true;
      window.addEventListener('scroll', () => {
        let activeIndex = '0';
        document.querySelectorAll('.frame-3[data-index]').forEach(item => {
          const rect = item.getBoundingClientRect();
          if (rect.top < window.innerHeight / 2) {
            activeIndex = item.getAttribute('data-index');
          }
        });
        setHighlight(activeIndex);
        setActiveGalleryItem(activeIndex);
        startGallerySwap(activeIndex);
      });
    }

    // Tap/click highlight (safe to reassign .onclick)
    document.querySelectorAll('.frame-3[data-index]').forEach(item => {
      item.onclick = () => {
        const index = item.getAttribute('data-index');
        setHighlight(index);
        setActiveGalleryItem(index);
        startGallerySwap(index);
      };
    });
  } else {
    // cleanup mobile/non-tablet state
    document.querySelectorAll('.gallery-section .hover-swap')
      .forEach(item => item.classList.remove('active'));
    resetHighlight();
    stopGallerySwap();

    // Desktop hover logic: also swap images to hover-img while hovering
    allPortfolioItems.forEach(item => {
      item.onmouseenter = () => {
        const index = item.getAttribute('data-index');
        setHighlight(index);
        allPortfolioItems.forEach(other => {
          other.style.opacity = other === item ? '1' : '0.5';
        });
        allGalleryItems.forEach(other => {
          other.style.opacity = other.getAttribute('data-index') === index ? '1' : '0.5';
        });

        // show hover image for the matching gallery item immediately
        stopGallerySwap();
        const gallerySwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
        if (gallerySwap) {
          const defaultImg = gallerySwap.querySelector('.default-img');
          const hoverImg = gallerySwap.querySelector('.hover-img');
          if (defaultImg) { defaultImg.style.display = 'none'; defaultImg.style.opacity = '0'; }
          if (hoverImg)  { hoverImg.style.display = 'block'; hoverImg.style.opacity = '1'; }
        }
      };
      item.onmouseleave = () => {
        resetHighlight();
        allPortfolioItems.forEach(other => { other.style.opacity = '1'; });
        allGalleryItems.forEach(other => { other.style.opacity = '1'; });

        // revert images for the matching gallery item
        const index = item.getAttribute('data-index');
        const gallerySwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
        if (gallerySwap) {
          const defaultImg = gallerySwap.querySelector('.default-img');
          const hoverImg = gallerySwap.querySelector('.hover-img');
          if (defaultImg) { defaultImg.style.display = 'block'; defaultImg.style.opacity = '1'; }
          if (hoverImg)  { hoverImg.style.display = 'none'; hoverImg.style.opacity = '0'; }
        }
      };
    });

    allGalleryItems.forEach(item => {
      item.onmouseenter = () => {
        const index = item.getAttribute('data-index');
        setHighlight(index);
        allGalleryItems.forEach(other => {
          other.style.opacity = other === item ? '1' : '0.5';
        });
        allPortfolioItems.forEach(other => {
          other.style.opacity = other.getAttribute('data-index') === index ? '1' : '0.5';
        });

        // show hover image for this gallery item
        stopGallerySwap();
        const gallerySwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
        if (gallerySwap) {
          const defaultImg = gallerySwap.querySelector('.default-img');
          const hoverImg = gallerySwap.querySelector('.hover-img');
          if (defaultImg) { defaultImg.style.display = 'none'; defaultImg.style.opacity = '0'; }
          if (hoverImg)  { hoverImg.style.display = 'block'; hoverImg.style.opacity = '1'; }
        }
      };
      item.onmouseleave = () => {
        resetHighlight();
        allGalleryItems.forEach(other => { other.style.opacity = '1'; });
        allPortfolioItems.forEach(other => { other.style.opacity = '1'; });

        // revert images for this gallery item
        const index = item.getAttribute('data-index');
        const gallerySwap = document.querySelector(`.gallery-section .hover-swap[data-index="${index}"]`);
        if (gallerySwap) {
          const defaultImg = gallerySwap.querySelector('.default-img');
          const hoverImg = gallerySwap.querySelector('.hover-img');
          if (defaultImg) { defaultImg.style.display = 'block'; defaultImg.style.opacity = '1'; }
          if (hoverImg)  { hoverImg.style.display = 'none'; hoverImg.style.opacity = '0'; }
        }
      };
    });
  }
}

window.addEventListener('DOMContentLoaded', tabletHighlightLogic);
window.addEventListener('resize', tabletHighlightLogic);
</script>


<script>
/* Mobile column-switcher: show the column that contains the clicked gallery item
   and ensure only one preview is visible. */
(function () {
  const MOBILE_MAX = 375;
  function isMobile() { return window.innerWidth <= MOBILE_MAX; }

  function clearActiveStates() {
    document.querySelectorAll('.gallery-section .grid-row--column').forEach(c => c.classList.remove('active-col'));
    document.querySelectorAll('.gallery-section .hover-swap').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.frame-3[data-index]').forEach(p => p.classList.remove('active','dimmed'));
  }

  function showColumnForIndex(idx) {
    if (!isMobile()) return;
    const targetIndex = String(idx);
    const swaps = Array.from(document.querySelectorAll('.gallery-section .hover-swap[data-index]'));
    const cols = Array.from(document.querySelectorAll('.gallery-section .grid-row--column'));
    if (!swaps.length || !cols.length) return;

    // activate only the exact hover-swap
    swaps.forEach(s => s.classList.toggle('active', s.getAttribute('data-index') === targetIndex));

    // activate only the column that contains that swap
    cols.forEach(col => {
      const contains = !!col.querySelector(`.hover-swap[data-index="${targetIndex}"]`);
      col.classList.toggle('active-col', contains);
    });

    // highlight the matching portfolio item (dim others)
    document.querySelectorAll('.frame-3[data-index]').forEach(p => {
      const is = p.getAttribute('data-index') === targetIndex;
      p.classList.toggle('active', is);
      p.classList.toggle('dimmed', !is);
    });
  }

  function initMobileHandlers() {
    if (!isMobile()) {
      clearActiveStates();
      return;
    }
    // if an item is already active keep it; otherwise show nothing until user selects
    const existing = document.querySelector('.gallery-section .hover-swap.active[data-index]');
    if (existing) showColumnForIndex(existing.getAttribute('data-index'));
    else clearActiveStates();
  }

  document.addEventListener('DOMContentLoaded', initMobileHandlers);
  window.addEventListener('resize', initMobileHandlers);

  document.addEventListener('click', (e) => {
    if (!isMobile()) return;
    const el = e.target.closest('.frame-3[data-index], .gallery-section .hover-swap[data-index]');
    if (!el) return;
    const idx = el.getAttribute('data-index');
    if (!idx) return;
    e.preventDefault();
    showColumnForIndex(idx);
  }, true);
})();
</script>


<div id="page-info" aria-hidden="true">
  <span id="ip-city" class="label">—</span>
  <span id="clock" class="clock">--:--:--</span>
</div>

<script>
/* robust city + clock (tries ipapi.co then ipwho.is). */
(async function () {
  const ipCityEl = document.getElementById('ip-city');
  const clockEl = document.getElementById('clock');

  function updateClock() {
    const d = new Date();
    clockEl.textContent = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
  }
  updateClock();
  setInterval(updateClock, 1000);

  async function fetchJsonWithTimeout(url, timeout = 5000) {
    const controller = new AbortController();
    const id = setTimeout(() => controller.abort(), timeout);
    try {
      const res = await fetch(url, { signal: controller.signal });
      clearTimeout(id);
      if (!res.ok) throw new Error('HTTP ' + res.status);
      return await res.json();
    } catch (err) {
      clearTimeout(id);
      throw err;
    }
  }

  async function getCity() {
    // try primary
    try {
      const data = await fetchJsonWithTimeout('https://ipapi.co/json/', 5000);
      return data && (data.city || data.region) || null;
    } catch (e) {
      console.warn('ipapi.co failed:', e);
    }
    // fallback
    try {
      const data = await fetchJsonWithTimeout('https://ipwho.is/', 5000);
      return data && (data.city || data.region) || null;
    } catch (e) {
      console.warn('ipwho.is failed:', e);
    }
    return null;
  }

  try {
    const city = await getCity();
    ipCityEl.textContent = city || '—';
  } catch (err) {
    console.error('City lookup error:', err);
    ipCityEl.textContent = '—';
  }
})();
</script>

<script>
(function () {
  // attach once
  if (window._desktopResetAttached) return;
  window._desktopResetAttached = true;

  function isDesktop() { return window.innerWidth > 768; }

  function restoreAll() {
    // revert visual dimming/state
    resetHighlight();
    stopGallerySwap();
    document.querySelectorAll('.frame-3[data-index]').forEach(i => i.style.opacity = '1');
    document.querySelectorAll('.gallery-section [data-index]').forEach(i => i.style.opacity = '1');
    // ensure gallery images show default image
    document.querySelectorAll('.gallery-section .hover-swap').forEach(s => {
      const def = s.querySelector('.default-img');
      const hov = s.querySelector('.hover-img');
      if (def) { def.style.display = 'block'; def.style.opacity = '1'; }
      if (hov) { hov.style.display = 'none'; hov.style.opacity = '0'; }
    });
  }

  function pointerHandler(e) {
    if (!isDesktop()) return;
    const el = document.elementFromPoint(e.clientX, e.clientY);
    if (!el) { restoreAll(); return; }
    if (el.closest('.frame-3') || el.closest('.gallery-section .hover-swap')) {
      // hovering over an interactive element — do nothing (existing hover handlers run)
      return;
    }
    // not over any interactive element: restore
    restoreAll();
  }

  // prefer container mouseleave (fast) and also global mousemove as fallback
  const container = document.querySelector('.d-landing .div') || document.body;
  container.addEventListener('mouseleave', () => { if (isDesktop()) restoreAll(); });
  document.addEventListener('mousemove', pointerHandler);

  // ensure listeners adapt on resize
  window.addEventListener('resize', () => { if (!isDesktop()) restoreAll(); });
})();
</script>


<!-- Replace the broken trailing script block with this initializer (put just before </body>) -->
<script>
/* Ensure first gallery preview (data-index="0") is visible on load and sync portfolio highlight.
   Also start tablet swap if on tablet. This is defensive (won't throw if helper functions absent). */
document.addEventListener('DOMContentLoaded', function () {
  try {
    // clean up any malformed leftover markup/scripts at file end before running
    // (If you kept broken characters after </script> - remove them in the file.)

    // ensure one active hover-swap (prefer existing, else first)
    const swaps = Array.from(document.querySelectorAll('.gallery-section .hover-swap[data-index]'));
    if (swaps.length === 0) return;

    // find an existing active, otherwise pick index 0 (JDE)
    let active = swaps.find(s => s.classList.contains('active')) || swaps.find(s => s.getAttribute('data-index') === '0') || swaps[0];

    swaps.forEach(s => s.classList.toggle('active', s === active));

    // ensure only the column containing the active swap is visible on mobile (if your mobile CSS uses .active-col)
    const cols = Array.from(document.querySelectorAll('.gallery-section .grid-row--column'));
    cols.forEach(col => {
      const contains = !!col.querySelector('.hover-swap.active');
      col.classList.toggle('active-col', contains);
    });

    // sync portfolio highlight: mark corresponding .frame-3 active and dim others
    const activeIndex = active.getAttribute('data-index');
    const ports = Array.from(document.querySelectorAll('.frame-3[data-index]'));
    ports.forEach(p => {
      const is = p.getAttribute('data-index') === activeIndex;
      p.classList.toggle('active', is);
      p.classList.toggle('dimmed', !is);
      // ensure title/subtitle opacity matches (keeps consistency if JS elsewhere uses inline styles)
      const title = p.querySelector('.gallery-caption');
      const subtitle = p.querySelector('.text-wrapper-5');
      if (title) title.style.opacity = is ? '1' : '0.5';
      if (subtitle) subtitle.style.opacity = is ? '1' : '0.5';
      p.style.opacity = '1';
    });

    // ensure gallery images inside the active swap show default image initially
    try {
      const def = active.querySelector('.default-img');
      const hov = active.querySelector('.hover-img');
      if (def) { def.style.display = 'block'; def.style.opacity = '1'; }
      if (hov) { hov.style.display = 'none'; hov.style.opacity = '0'; }
    } catch (e) { /* ignore */ }

    // If tablet functions exist, start tablet behavior for index 0 when on tablet
    if (typeof setActiveGalleryItem === 'function') {
      setActiveGalleryItem(activeIndex);
    }
    if (typeof setHighlight === 'function') {
      setHighlight(activeIndex);
    }
    if (typeof startGallerySwap === 'function' && window.innerWidth > 375 && window.innerWidth <= 768) {
      startGallerySwap(activeIndex);
    }
  } catch (err) {
    // log for debugging (remove in production)
    console.error('init gallery failed:', err);
  }
});
</script>


<!-- ensure JDE (data-index="0") is the visible/active item on initial load for mobile + tablet -->
<script>
window.addEventListener('load', function () {
  const idx = '0';
  // Ensure exactly one hover-swap is active
  document.querySelectorAll('.gallery-section .hover-swap[data-index]').forEach(s => {
    s.classList.toggle('active', s.getAttribute('data-index') === idx);
  });

  // On mobile: show the column containing the active swap
  if (window.innerWidth <= 375) {
    document.querySelectorAll('.gallery-section .grid-row--column').forEach(col => {
      col.classList.toggle('active-col', !!col.querySelector(`.hover-swap[data-index="${idx}"]`));
    });
  }

  // For tablet/mobile behavior and highlights
  if (typeof setActiveGalleryItem === 'function') setActiveGalleryItem(idx);
  if (typeof setHighlight === 'function') setHighlight(idx);

  // Start tablet swap only on tablet (not on mobile)
  if (typeof startGallerySwap === 'function' && window.innerWidth > 375 && window.innerWidth <= 768) {
    startGallerySwap(idx);
  }

  // Ensure portfolio item highlight/dim state is synced
  document.querySelectorAll('.frame-3[data-index]').forEach(p => {
    const is = p.getAttribute('data-index') === idx;
    p.classList.toggle('active', is);
    p.classList.toggle('dimmed', !is);
    // ensure title/subtitle opacity matches (keeps consistency if JS elsewhere uses inline styles)
    const title = p.querySelector('.gallery-caption');
    const subtitle = p.querySelector('.text-wrapper-5');
    if (title) title.style.opacity = is ? '1' : '0.5';
    if (subtitle) subtitle.style.opacity = is ? '1' : '0.5';
    p.style.opacity = '1';
  });
  });
</script>

</body>

</html>